<div class="mainwindow">
    <div class="content_window">        
        <div class="flexorientation--spaceb">            
            <h2 id="documenttitle"></h2>
            <small>{{date}}</small>           
        </div>        
        <hr>       
        <div id="list">
            {{#if documents}}
            {{else}}
            <p>NÃ£o existem documentos dentro deste processo.</p>
            {{/if}}
        </div>        
        <hr>
        {{#if states}}
        <div class="display-float-right">
            <small>Status</small>
            <button class="button" id="statusbutton">+</button>
        </div>
        <div id="states">            
        </div>
        {{else}}
        <div class="display-float-right">
            <small>Status</small>
            <button class="button_disable" id="statusbutton">+</button>
        </div>
        {{/if}}        
        <form id="upload">
            <label for="file" class="button_file">Upload</label>
            <input type="file" id="file" name="file" value="" required>
            <span id="filename"></span required>            
        </form>
        <br>
        <p id="message"></p>
        {{#if error}}        
        <p>{{error}}</p>        
        {{/if}}
        <div class="flexorientation--spaceb">
            <div class="arrow">
                <a href="/processosrecebidos/"><img src="/img/seta2.png" style="height: 20px; width: 20px;"></a>
            </div>
            <form id="sendprocess">
            </form>
        </div>
    </div>
</div>


<script src="/js/document_reader/readerFile.js"></script>
<script>    
    const title = document.getElementById('documenttitle');
    const list = document.getElementById('list');
    const names = [];
    let states = [];   
    title.textContent = '{{title}}'.split('_')[3];
    '{{#each documents}}'
    names.push({
        name:'{{name}}',
        link: '{{name}}'
        });
    '{{/each}}'

    '{{#if states}}'
    '{{#each states}}'
    states.push({
        id: '{{_id}}',
        state: '{{state}}',
        anotation: '{{anotation}}',
        date: '{{date}}'
    });    
    '{{/each}}'
    '{{/if}}'
     
    listReader(list, names, `/processosrecebidos/{{year}}/{{title}}/`);
    listStates(states, '{{year}}', '{{title}}', title.innerText, `/processosrecebidos/{{year}}/{{title}}/`);
    upload( '{{year}}', '{{title}}', 'inTransfer', `/processosrecebidos/{{year}}/{{title}}/`);
    sendProcess('{{id}}', '{{title}}'.split('_')[3], '{{year}}')

</script> 
